# PPP

성균관대학교 안상진 교수님의 강의 자료를 정리한 것입니다.



![image-20210425164911187](05_HDLC(4)(5).assets/image-20210425164911187.png)

- LCP : PPP에서 연결 설정을 담당하는 부분을 따로 빼서 이름을 만든 것


- AP : PPP는 HDLC와 다르게 인증을 함 그 인증 프로토콜을 따로 정의 한 것


- NCP : 사용자의 데이터를 받기전에 네트워크에 대한 연결설정을 하는 것 

​		         PPP위에 올라가는 네트워크 프로토콜이 무엇인지 알려주기 위함

프로토콜에 들어가는 값에 따라 Payload가 의미하는 것이 달라짐

사용자 데이터를 실어 나르기 위해서 LCP -> AP -> NCP의 과정을 거침



## LCP

![image-20210425165145945](05_HDLC(4)(5).assets/image-20210425165145945.png)

데이터를 실어 나르는 것과는 관계 없음 link control과 관련된 것을 PPP에서 모아 놓은 것

establishing : 연결 설정을 하는 것

maintaining : 연결을 계속 유지 시키는 것

configuring : 파라미터 등 구성 정보를 바꾸는 것

terminating : 연결을 끊는 것

![image-20210425170252063](05_HDLC(4)(5).assets/image-20210425170252063.png)

![image-20210425170326689](05_HDLC(4)(5).assets/image-20210425170326689.png)

예를 들어 코드값이 0x01이면 연결설정을 하자 0x05이면 연결을 끊자 요청



![image-20210425170621899](05_HDLC(4)(5).assets/image-20210425170621899.png)

옵션 설정도 가능 ex) 데이터 크기  최대를 1500byte로 하자



## AP

![image-20210425170831846](05_HDLC(4)(5).assets/image-20210425170831846.png)

인증 프로토콜에는 두가지가 있따 PAP와 CHAP

PAP의 보안상 취약점을 보완한 것이  CHAP



### PAP

![image-20210425171220811](05_HDLC(4)(5).assets/image-20210425171220811.png)

1. 인증을 PAP로 하자고 정함

2. 유저의 이름과 비밀번호를 보냄

3. 데이터 베이스에 있는 정보로 체크 -> 어 일치하네? ㅇㅋ 통과

EX)


![image-20210425171829730](05_HDLC(4)(5).assets/image-20210425171829730.png)

취약점 : 통신과정을 뜯어보면 아이디와 비밀번호를 알아내기 쉬움



### CHAP

![image-20210425172019840](05_HDLC(4)(5).assets/image-20210425172019840.png)

1. 유저가 사용하는 프로그램과 시스템 사이에 미리 약속을 함

   ex) 100을 보내면 10을 더해서 보낸다.

2. CHAP으로 연결되면 시스템이 Challenge value를 보냄

3. Challenge value에 약속된 처리를 해서 보냄

4. 수락 or 거부

3번 왔다갔다 해야해서 3-way-handshaking이라 부름



![image-20210425172624950](05_HDLC(4)(5).assets/image-20210425172624950.png)

패스워드 자체가 비밀로 유지되고 온라인으로 보내지지 않는다.



EX)

![image-20210425172714212](05_HDLC(4)(5).assets/image-20210425172714212.png)

보안성이 강회된 만큼 왔다갔다하는 데이터 수도 늘어남



## NCP

![image-20210425173010711](05_HDLC(4)(5).assets/image-20210425173010711.png)

여러가지 종류의 네크워트 프로토콜이 올 수 있어 네트워크 연결 설정을 하지만, 현실적으로는 IPCP가 많음



![image-20210425173250233](05_HDLC(4)(5).assets/image-20210425173250233.png)

8021이 오면 IP프로토콜이 온다고 생각하고 연결설정을 함



![image-20210425173347748](05_HDLC(4)(5).assets/image-20210425173347748.png)

이러한 코드를 통해 연결을하고 끊고 설정함



## Data

![image-20210425173420397](05_HDLC(4)(5).assets/image-20210425173420397.png)

다음으로 프로토콜 값이 0021가 오게되면 정말로 사용자 데이터가 왔다갔다함



![image-20210425173551271](05_HDLC(4)(5).assets/image-20210425173551271.png)



## 정리

![image-20210425173714345](05_HDLC(4)(5).assets/image-20210425173714345.png)

1. LCP로 연결설정

2. 인증단계

3. NCP로 네트워크 연결설정

4. 데이터 전송

5. 끊을때는 역으로 NCP -> LCP (AP는 끊는 것이 아님)

   

EX)

![image-20210425174149990](05_HDLC(4)(5).assets/image-20210425174149990.png)

![image-20210425174207304](05_HDLC(4)(5).assets/image-20210425174207304.png)